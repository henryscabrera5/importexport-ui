{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/jseyoum21/Downloads/importexport-ui-main/app/api/process-documents/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\"\nimport { GoogleGenerativeAI } from \"@google/generative-ai\"\n\nconst GEMINI_API_KEY = process.env.GEMINI_API_KEY\n\nif (!GEMINI_API_KEY) {\n  console.warn(\"GEMINI_API_KEY is not set. Document processing will not work.\")\n}\n\nconst genAI = GEMINI_API_KEY ? new GoogleGenerativeAI(GEMINI_API_KEY) : null\n\n/**\n * POST /api/process-documents\n * Process a document using Gemini LLM\n */\nexport async function POST(request: NextRequest) {\n  try {\n    if (!genAI) {\n      return NextResponse.json(\n        { error: \"Gemini API key not configured\" },\n        { status: 500 },\n      )\n    }\n\n    const body = await request.json()\n    const { fileData, fileName, mimeType, documentType } = body\n\n    if (!fileData || !documentType) {\n      return NextResponse.json(\n        { error: \"Missing required fields: fileData and documentType\" },\n        { status: 400 },\n      )\n    }\n\n    // Get the Gemini model\n    // NOTE: Default/free tier API keys typically only have access to gemini-2.0-flash-exp\n    // Check available models at /api/check-gemini-models if you need to verify\n    const model = genAI.getGenerativeModel({ model: \"gemini-2.0-flash-exp\" })\n\n    // First pass: Understand the document structure\n    // NOTE: This understanding prompt may be adjusted based on document analysis needs\n    const understandingPrompt = `Analyze this document and describe its structure, layout, and content type. \nIdentify if it contains tables, lists, or structured data. \nFor packing lists, identify if items are in a table format where each row represents one item.\nReturn a brief JSON summary: { \"documentType\": \"...\", \"hasTables\": true/false, \"tableStructure\": \"description\", \"itemCount\": number }`\n\n    const firstPassResult = await model.generateContent([\n      understandingPrompt,\n      {\n        inlineData: {\n          data: fileData,\n          mimeType: mimeType,\n        },\n      },\n    ])\n\n    const firstPassResponse = await firstPassResult.response\n    const firstPassText = firstPassResponse.text()\n\n    // Parse first pass understanding\n    let documentUnderstanding\n    try {\n      const jsonMatch = firstPassText.match(/```json\\n([\\s\\S]*?)\\n```/) || firstPassText.match(/```\\n([\\s\\S]*?)\\n```/)\n      const jsonString = jsonMatch ? jsonMatch[1] : firstPassText\n      documentUnderstanding = JSON.parse(jsonString)\n    } catch (parseError) {\n      documentUnderstanding = { rawText: firstPassText }\n    }\n\n    // Second pass: Extract data (with specialized prompts for each document type)\n    let prompt\n    if (documentType === \"packing_list\") {\n      // Special prompt for packing lists to extract table rows\n      prompt = createPackingListExtractionPrompt(documentUnderstanding)\n    } else if (documentType === \"commercial_invoice\") {\n      // Special prompt for commercial invoices to extract billed items from table rows\n      prompt = createCommercialInvoiceExtractionPrompt(documentUnderstanding)\n    } else {\n      // Fallback extraction prompt\n      prompt = createPromptForDocumentType(documentType)\n    }\n\n    // Process the document for extraction\n    const result = await model.generateContent([\n      prompt,\n      {\n        inlineData: {\n          data: fileData,\n          mimeType: mimeType,\n        },\n      },\n    ])\n\n    const response = await result.response\n    const text = response.text()\n\n    // Parse the JSON response from Gemini\n    // NOTE: Response parsing logic may need adjustment based on Gemini's output format changes\n    let parsedData\n    try {\n      // Extract JSON from markdown code blocks if present\n      // NOTE: This regex pattern may need updates if Gemini changes its response formatting\n      const jsonMatch = text.match(/```json\\n([\\s\\S]*?)\\n```/) || text.match(/```\\n([\\s\\S]*?)\\n```/)\n      const jsonString = jsonMatch ? jsonMatch[1] : text\n      parsedData = JSON.parse(jsonString)\n    } catch (parseError) {\n      // If parsing fails, try to extract structured data from text\n      // NOTE: Fallback parsing strategy - may need enhancement for better error recovery\n      parsedData = {\n        rawText: text,\n        parseError: \"Failed to parse JSON response\",\n      }\n    }\n\n    // Add understanding metadata to parsed data\n    parsedData.documentUnderstanding = documentUnderstanding\n\n    // NOTE: Response structure may be modified when integrating with Supabase storage\n    return NextResponse.json({\n      documentType,\n      extractedData: parsedData,\n      confidence: parsedData.confidence || 0.85,\n      processingMetadata: {\n        model: \"gemini-2.0-flash-exp\", // NOTE: Default API keys typically use this model\n        extractionMethod: \"gemini_vision\",\n        fileName,\n      },\n    })\n  } catch (error) {\n    console.error(\"Error processing document:\", error)\n    return NextResponse.json(\n      {\n        error: \"Failed to process document\",\n        message: error instanceof Error ? error.message : \"Unknown error\",\n      },\n      { status: 500 },\n    )\n  }\n}\n\n/**\n * Create fallback prompt for document extraction (used for unknown document types)\n * NOTE: This is a generic fallback - specific document types use specialized prompts\n */\nfunction createPromptForDocumentType(documentType: string): string {\n  const basePrompt = `You are an expert at extracting structured data from import/export documents. \nAnalyze the provided document and extract all relevant information. Return the data as a JSON object.`\n\n  return basePrompt\n}\n\n/**\n * Create specialized prompt for commercial invoice extraction with table row focus\n * NOTE: This prompt structure and output format may be adjusted based on document variations\n */\nfunction createCommercialInvoiceExtractionPrompt(documentUnderstanding: any): string {\n  return `You are an expert at extracting structured data from COMMERCIAL INVOICES.\n\nIMPORTANT: Commercial invoices typically contain billed items in a TABLE format where EACH ROW represents ONE BILLED ITEM.\n\nBased on the document structure analysis, extract the following information:\n\n1. Document Header Information (REQUIRED):\n- invoiceNumber: Invoice number (extract from document)\n- invoiceDate: Invoice date (YYYY-MM-DD format)\n- currency: Currency code (e.g., \"USD\", \"EUR\", \"CNY\") - extract from document\n\n2. Shipper/Consignee Information (REQUIRED):\n- seller (Shipper/Exporter): { \n    name: Company/business name,\n    address: Complete exact address including street, city, state/province, postal code, country,\n    taxId: Tax ID/VAT number if available,\n    contact: {\n      phone: Phone number if available,\n      email: Email address if available,\n      fax: Fax number if available,\n      contactPerson: Contact person name if available\n    }\n  } - Extract shipper/exporter/seller complete information\n- buyer (Consignee): { \n    name: Company/business name,\n    address: Complete exact address including street, city, state/province, postal code, country,\n    taxId: Tax ID/VAT number if available,\n    contact: {\n      phone: Phone number if available,\n      email: Email address if available,\n      fax: Fax number if available,\n      contactPerson: Contact person name if available\n    }\n  } - Extract consignee/buyer complete information\n\n3. Billed Items/Products Table (REQUIRED):\nThe document contains a table where each ROW is one billed item. Extract ALL rows from the table.\nFor EACH ROW, create an entry in the products array with:\n- description: Product/item description from the row (REQUIRED)\n- quantity: Quantity as number (REQUIRED - extract from the row)\n- unitOfMeasure: Unit of measure (e.g., \"pcs\", \"kg\", \"m\", \"boxes\", \"cartons\")\n- unitPrice: Unit price as number (REQUIRED - extract from the row)\n- totalPrice: Total price for this line item (REQUIRED - extract from the row)\n- countryOfOrigin: Country being shipped from/origin (e.g., \"CN\", \"US\", \"DE\") - extract country code or name\n- htsCode: HS Code (Harmonized System code) if available in the row - also known as HTS code\n- currency: Currency code (e.g., \"USD\", \"EUR\") - usually consistent across all items\n- weight: Weight from the row (if available)\n- weightUnit: Weight unit (e.g., \"kg\", \"lbs\")\n- any other relevant fields from the table columns\n\n4. Shipment Information:\n- shipmentInfo: { \n    originCountry: Country being shipped from/origin (REQUIRED),\n    originCity: Origin city if available,\n    destinationCountry: Destination country,\n    destinationCity: Destination city,\n    carrier: Carrier name if available,\n    containerNumber: Container number if available,\n    vesselName: Vessel name if available,\n    estimatedArrivalDate: Estimated arrival date if available,\n    incoterms: Incoterms if applicable (e.g., \"FOB\", \"CIF\", \"EXW\", \"DDP\", \"DAP\", etc.)\n  }\n\n5. Document Signer Information:\n- signer: {\n    name: Full name of person signing the document,\n    company: Company name of signer if different from seller,\n    title: Job title/position if available,\n    signature: Signature information if available,\n    date: Date of signature if available,\n    contact: {\n      phone: Phone number if available,\n      email: Email address if available\n    }\n  } - Extract complete information about the person signing off on the document\n\n6. Totals:\n- totals: { totalValue: Total invoice value (REQUIRED), totalWeight, currency }\n\n7. Metadata:\n- confidence: Your confidence score (0-1)\n\nCRITICAL EXTRACTION REQUIREMENTS: \n- Extract EVERY row from the billed items table\n- Each row should become one object in the products array\n- Product Descriptions: Extract full product/item descriptions\n- Quantities: Extract quantities as numbers\n- Unit Prices and Totals: Extract both unit price and total price for each line item\n- Shipper/Exporter/Consignee Names and Addresses: Extract complete exact addresses including street address, city, state/province, postal code, and country\n- Contact Information: Extract phone, email, fax, and contact person for all parties (seller, buyer, signer)\n- Signer Information: Extract name, company, title, signature details, and contact information for person signing the document\n- Invoice Numbers: Extract invoice number from document header\n- Dates: Extract invoice date in YYYY-MM-DD format\n- Currencies: Extract currency code (USD, EUR, etc.)\n- Country being shipped from/origin: Extract origin country for each product and overall shipment\n- HS Code: Extract HS/HTS codes if visible in the table rows\n- Incoterms: Extract incoterms if applicable (FOB, CIF, EXW, DDP, DAP, etc.)\n- Preserve all information from each table row including pricing details\n- If the table has column headers, use them to identify what each column represents\n- Ensure currency is captured and applied consistently\n\nReturn ONLY valid JSON in this format:\n{\n  \"invoiceNumber\": \"...\",\n  \"invoiceDate\": \"YYYY-MM-DD\",\n  \"currency\": \"USD\",\n  \"seller\": { \n    \"name\": \"...\", \n    \"address\": \"Complete exact address including street, city, state, postal code, country\",\n    \"taxId\": \"...\",\n    \"contact\": {\n      \"phone\": \"...\",\n      \"email\": \"...\",\n      \"fax\": \"...\",\n      \"contactPerson\": \"...\"\n    }\n  },\n  \"buyer\": { \n    \"name\": \"...\", \n    \"address\": \"Complete exact address including street, city, state, postal code, country\",\n    \"taxId\": \"...\",\n    \"contact\": {\n      \"phone\": \"...\",\n      \"email\": \"...\",\n      \"fax\": \"...\",\n      \"contactPerson\": \"...\"\n    }\n  },\n  \"signer\": {\n    \"name\": \"Full name of signer\",\n    \"company\": \"Company name\",\n    \"title\": \"Job title\",\n    \"signature\": \"Signature info if available\",\n    \"date\": \"Signature date\",\n    \"contact\": {\n      \"phone\": \"...\",\n      \"email\": \"...\"\n    }\n  },\n  \"products\": [\n    { \n      \"description\": \"...\", \n      \"quantity\": 1, \n      \"unitPrice\": 10.00, \n      \"totalPrice\": 10.00,\n      \"countryOfOrigin\": \"CN\",\n      \"htsCode\": \"8471.30.0100\",\n      \"currency\": \"USD\",\n      ...\n    },\n    ...\n  ],\n  \"shipmentInfo\": { \n    \"originCountry\": \"CN\",\n    \"originCity\": \"...\",\n    \"destinationCountry\": \"US\",\n    \"incoterms\": \"FOB\",\n    ...\n  },\n  \"totals\": { \"totalValue\": 1000.00, \"totalWeight\": 500, \"currency\": \"USD\" },\n  \"confidence\": 0.95\n}\n\nReturn ONLY valid JSON, no markdown formatting or additional text.`\n}\n\n/**\n * Create specialized prompt for packing list extraction with table row focus\n * NOTE: This prompt structure and output format may be adjusted based on document variations\n */\nfunction createPackingListExtractionPrompt(documentUnderstanding: any): string {\n  return `You are an expert at extracting structured data from PACKING LISTS.\n\nIMPORTANT: Packing lists typically contain items in a TABLE format where EACH ROW represents ONE ITEM.\n\nBased on the document structure analysis, extract the following information:\n\n1. Document Header Information (REQUIRED):\n- packingListNumber: Packing list number (extract from document)\n- invoiceNumber: Invoice number if referenced on packing list\n- shipmentDate: Shipment date (YYYY-MM-DD format)\n- currency: Currency code (e.g., \"USD\", \"EUR\", \"CNY\") if available\n\n2. Shipper/Consignee Information (REQUIRED):\n- seller (Shipper/Exporter): { \n    name: Company/business name,\n    address: Complete exact address including street, city, state/province, postal code, country,\n    taxId: Tax ID/VAT number if available,\n    contact: {\n      phone: Phone number if available,\n      email: Email address if available,\n      fax: Fax number if available,\n      contactPerson: Contact person name if available\n    }\n  } - Extract shipper/exporter/seller complete information\n- buyer (Consignee): { \n    name: Company/business name,\n    address: Complete exact address including street, city, state/province, postal code, country,\n    taxId: Tax ID/VAT number if available,\n    contact: {\n      phone: Phone number if available,\n      email: Email address if available,\n      fax: Fax number if available,\n      contactPerson: Contact person name if available\n    }\n  } - Extract consignee/buyer complete information\n\n3. Items/Products Table (REQUIRED):\nThe document contains a table where each ROW is one item. Extract ALL rows from the table.\nFor EACH ROW, create an entry in the products array with:\n- description: Product/item description from the row (REQUIRED)\n- quantity: Quantity as number (REQUIRED - extract from the row)\n- unitOfMeasure: Unit of measure (e.g., \"pcs\", \"kg\", \"m\", \"boxes\", \"cartons\")\n- unitPrice: Unit price as number (if available in the row)\n- totalPrice: Total price for this line item (if available in the row)\n- countryOfOrigin: Country being shipped from/origin (e.g., \"CN\", \"US\", \"DE\") - extract country code or name\n- htsCode: HS Code (Harmonized System code) if available in the row - also known as HTS code\n- packageNumber: Package/carton number if listed (Package Counts)\n- packageCount: Number of packages/cartons for this item\n- weight: Weight from the row (REQUIRED if available)\n- weightUnit: Weight unit (e.g., \"kg\", \"lbs\")\n- dimensions: Dimensions if available (length x width x height) - extract as string like \"10x20x30 cm\" or object\n- length: Length dimension if available\n- width: Width dimension if available\n- height: Height dimension if available\n- dimensionUnit: Unit for dimensions (e.g., \"cm\", \"in\", \"m\")\n- currency: Currency code (e.g., \"USD\", \"EUR\") if available\n- any other relevant fields from the table columns\n\n4. Shipment Information:\n- shipmentInfo: { \n    originCountry: Country being shipped from/origin (REQUIRED),\n    originCity: Origin city if available,\n    destinationCountry: Destination country,\n    destinationCity: Destination city,\n    carrier: Carrier name if available,\n    containerNumber: Container number if available,\n    vesselName: Vessel name if available,\n    estimatedArrivalDate: Estimated arrival date if available,\n    incoterms: Incoterms if applicable (e.g., \"FOB\", \"CIF\", \"EXW\", \"DDP\", \"DAP\", etc.)\n  }\n\n5. Document Signer Information:\n- signer: {\n    name: Full name of person signing the document,\n    company: Company name of signer if different from seller,\n    title: Job title/position if available,\n    signature: Signature information if available,\n    date: Date of signature if available,\n    contact: {\n      phone: Phone number if available,\n      email: Email address if available\n    }\n  } - Extract complete information about the person signing off on the document\n\n6. Totals:\n- totals: { \n    totalWeight: Total weight (REQUIRED if available),\n    weightUnit: Weight unit,\n    totalPackages: Total package count (REQUIRED if available),\n    totalQuantity: Total quantity of items,\n    totalValue: Total value if available,\n    currency: Currency code\n  }\n\n7. Metadata:\n- confidence: Your confidence score (0-1)\n\nCRITICAL EXTRACTION REQUIREMENTS: \n- Extract EVERY row from the items table\n- Each row should become one object in the products array\n- Product Descriptions: Extract full product/item descriptions\n- Quantities: Extract quantities as numbers\n- Unit Prices and Totals: Extract both unit price and total price if available\n- Shipper/Exporter/Consignee Names and Addresses: Extract complete exact addresses including street address, city, state/province, postal code, and country\n- Contact Information: Extract phone, email, fax, and contact person for all parties (seller, buyer, signer)\n- Signer Information: Extract name, company, title, signature details, and contact information for person signing the document\n- Invoice Numbers: Extract invoice number if referenced on packing list\n- Dates: Extract shipment date in YYYY-MM-DD format\n- Currencies: Extract currency code (USD, EUR, etc.) if available\n- Country being shipped from/origin: Extract origin country for each product and overall shipment\n- HS Code: Extract HS/HTS codes if visible in the table rows\n- Package Counts: Extract number of packages/cartons for each item and total\n- Weights: Extract weight for each item and total weight\n- Dimensions: Extract dimensions (length, width, height) for each item if available\n- Incoterms: Extract incoterms if applicable (FOB, CIF, EXW, DDP, DAP, etc.)\n- Preserve all information from each table row\n- If the table has column headers, use them to identify what each column represents\n\nReturn ONLY valid JSON in this format:\n{\n  \"packingListNumber\": \"...\",\n  \"invoiceNumber\": \"...\",\n  \"shipmentDate\": \"YYYY-MM-DD\",\n  \"currency\": \"USD\",\n  \"seller\": { \n    \"name\": \"...\", \n    \"address\": \"Complete exact address including street, city, state, postal code, country\",\n    \"taxId\": \"...\",\n    \"contact\": {\n      \"phone\": \"...\",\n      \"email\": \"...\",\n      \"fax\": \"...\",\n      \"contactPerson\": \"...\"\n    }\n  },\n  \"buyer\": { \n    \"name\": \"...\", \n    \"address\": \"Complete exact address including street, city, state, postal code, country\",\n    \"taxId\": \"...\",\n    \"contact\": {\n      \"phone\": \"...\",\n      \"email\": \"...\",\n      \"fax\": \"...\",\n      \"contactPerson\": \"...\"\n    }\n  },\n  \"signer\": {\n    \"name\": \"Full name of signer\",\n    \"company\": \"Company name\",\n    \"title\": \"Job title\",\n    \"signature\": \"Signature info if available\",\n    \"date\": \"Signature date\",\n    \"contact\": {\n      \"phone\": \"...\",\n      \"email\": \"...\"\n    }\n  },\n  \"products\": [\n    { \n      \"description\": \"...\", \n      \"quantity\": 1,\n      \"unitPrice\": 10.00,\n      \"totalPrice\": 10.00,\n      \"countryOfOrigin\": \"CN\",\n      \"htsCode\": \"8471.30.0100\",\n      \"packageNumber\": \"PKG-001\",\n      \"packageCount\": 2,\n      \"weight\": 5.5,\n      \"weightUnit\": \"kg\",\n      \"dimensions\": \"10x20x30 cm\",\n      \"length\": 10,\n      \"width\": 20,\n      \"height\": 30,\n      \"dimensionUnit\": \"cm\",\n      ...\n    },\n    ...\n  ],\n  \"shipmentInfo\": { \n    \"originCountry\": \"CN\",\n    \"originCity\": \"...\",\n    \"incoterms\": \"FOB\",\n    ...\n  },\n  \"totals\": { \n    \"totalWeight\": 100,\n    \"weightUnit\": \"kg\",\n    \"totalPackages\": 20,\n    \"totalQuantity\": 50,\n    \"totalValue\": 1000.00,\n    \"currency\": \"USD\"\n  },\n  \"confidence\": 0.95\n}\n\nReturn ONLY valid JSON, no markdown formatting or additional text.`\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}